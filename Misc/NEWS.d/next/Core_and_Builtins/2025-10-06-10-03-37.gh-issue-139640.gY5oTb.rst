Fix swallowing some syntax warnings in different modules if they
accidentally have the same message and are emitted from the same line.
Fix duplicated warnings in the ``finally`` block.
