# -*- mode: makefile; fill-column: 75; tab-width: 8; coding: iso-latin-1-unix -*-
#
# $Id: Makefile.in,v 1.2 2002/11/13 21:12:17 idiscovery Exp $
#
#	This file is a Makefile for Tix. If it has the name
#	"Makefile.in" Then it is a template for a Makefile; to
#	generate the actual Makefile, run "./configure", which is a
#	configuration script generated by the "autoconf" program
#	(constructs like "@foo@" will get replaced in the actual
#	Makefile.
#
#	See the file README for information about executing the test
#	suites.
#
# Copyright (c) 1996, Expert Interface Technologies
#
# See the file "license.terms" for information on usage and redistribution
# of this file, and for a DISCLAIMER OF ALL WARRANTIES.
#
#
@SET_MAKE@

BINSRC_DIR	=	@SRC_DIR@
SRC_DIR		=	@SRC_DIR@
LIBRARY_DIR	=	@SRC_DIR@/library
DEMOS_DIR	=	@SRC_DIR@/demos
MANUAL_DIR	=	@SRC_DIR@/man
VPATH		=	@SRC_DIR@

all: @TIX_TARGETS@ @TIX_TEST_LOAD@

test: all

unix-tk4.0:: tk40

unix-tk4.1:: tk41

unix-tk4.2:: tk42

unix-itcl2.0:: itcl20

unix-itcl2.1:: itcl21

# There are no test for the following targets (they don't really need
# tests)
unix-et-tk4.0::

unix-et-tk4.1::

demos-c::

# Some versions of make, like SGI's, use the following variable to
# determine which shell to use for executing commands:
SHELL =		/bin/sh

SUBSETS=

ENVIRON_74 = TEST_TCL_LIBRARY=@TCL74_SRC_DIR@/library \
	TEST_TK_LIBRARY=@TK40_SRC_DIR@/library \
	TEST_ITCL_LIBRARY=@ITCL20_SRC_DIR@/itcl/library \
	TEST_ITK_LIBRARY=@ITCL20_SRC_DIR@/itk/library \
	IWIDGETS_LIBRARY=@ITCL20_SRC_DIR@/iwidgets2.0.0 \
	TIX_LIBRARY=@SRC_DIR@/library \
	TEST_BINSRC_DIR=$(BINSRC_DIR) \
	TEST_LDPATHS=""


ENVIRON_75 = TEST_TCL_LIBRARY=@TCL75_SRC_DIR@/library \
	TEST_TK_LIBRARY=@TK41_SRC_DIR@/library \
	TEST_ITCL_LIBRARY=@ITCL20_SRC_DIR@/itcl/library \
	TEST_ITK_LIBRARY=@ITCL20_SRC_DIR@/itk/library \
	IWIDGETS_LIBRARY=@ITCL20_SRC_DIR@/iwidgets2.0.0 \
	TIX_LIBRARY=@SRC_DIR@/library \
	TEST_BINSRC_DIR=$(BINSRC_DIR) \
	TEST_LDPATHS=@TCL75_SRC_DIR@/unix:@TK41_SRC_DIR@/unix:$(BINSRC_DIR)/unix-tk4.1


ENVIRON_76 = TEST_TCL_LIBRARY=@TCL76_SRC_DIR@/library \
	TEST_TK_LIBRARY=@TK42_SRC_DIR@/library \
	TEST_ITCL_LIBRARY=@ITCL20_SRC_DIR@/itcl/library \
	TEST_ITK_LIBRARY=@ITCL20_SRC_DIR@/itk/library \
	IWIDGETS_LIBRARY=@ITCL20_SRC_DIR@/iwidgets2.0.0 \
	TIX_LIBRARY=@SRC_DIR@/library \
	TEST_BINSRC_DIR=$(BINSRC_DIR) \
	TEST_LDPATHS=@TCL76_SRC_DIR@/unix:@TK42_SRC_DIR@/unix:$(BINSRC_DIR)/unix-tk4.2

ENVIRON_ITCL_20 = TEST_TCL_LIBRARY=@ITCL20_SRC_DIR@/tcl7.4/library \
	TEST_TK_LIBRARY=@ITCL20_SRC_DIR@/tk4.0/library \
	TEST_ITCL_LIBRARY=@ITCL20_SRC_DIR@/itcl/library \
	TEST_ITK_LIBRARY=@ITCL20_SRC_DIR@/itk/library \
	IWIDGETS_LIBRARY=@ITCL20_SRC_DIR@/iwidgets2.0.0 \
	TIX_LIBRARY=@SRC_DIR@/library \
	TEST_BINSRC_DIR=$(BINSRC_DIR) \
	TEST_LDPATHS=""

ENVIRON_ITCL_21 = TEST_TCL_LIBRARY=@ITCL21_SRC_DIR@/tcl7.5/library \
	TEST_TK_LIBRARY=@ITCL21_SRC_DIR@/tk4.1/library \
	TEST_ITCL_LIBRARY=@ITCL21_SRC_DIR@/itcl/library \
	TEST_ITK_LIBRARY=@ITCL21_SRC_DIR@/itk/library \
	IWIDGETS_LIBRARY=@ITCL21_SRC_DIR@/iwidgets2.1.0 \
	TIX_LIBRARY=@SRC_DIR@/library \
	TEST_BINSRC_DIR=$(BINSRC_DIR) \
	TEST_LDPATHS=@ITCL21_SRC_DIR@/itk/unix:@ITCL21_SRC_DIR@/itcl/unix:@ITCL21_SRC_DIR@/tcl7.5/unix:@ITCL21_SRC_DIR@/tk4.1/unix:$(BINSRC_DIR)/unix-itcl2.1

tk40::
	@$(ENVIRON_74) \
	tclsh Test.tcl tk40 $(SUBSETS)

tk41::
	@$(ENVIRON_75) \
	tclsh Test.tcl tk41 $(SUBSETS)

tk42::
	@$(ENVIRON_76) \
	tclsh Test.tcl tk42 $(SUBSETS)

itcl20::
	@$(ENVIRON_ITCL_20) \
	tclsh Test.tcl itcl20 $(SUBSETS)

itcl21::
	@$(ENVIRON_ITCL_21) \
	tclsh Test.tcl itcl21 $(SUBSETS)

load::
	@$(ENVIRON_75) \
	tclsh Test.tcl load $(SUBSETS)

Makefile: Makefile.in
	cd $(SRC_DIR); $(SHELL) config.status

distclean:
	- rm -f Makefile

#----------------------------------------------------------------------
#
#	Testing the files in the binary distribution
#
#----------------------------------------------------------------------

dist: dist_tk40 dist_tk41 dist_itcl20 dist_itcl21

BDIST=$(TIX_BIN_DIST_DIR)
SDIST=$(TIX_SRC_DIST_DIR)

ENV_TK40_DIST = \
	TIX_LIBRARY=$(SDIST)/library \
	TCL_LIBRARY=@TCL74_SRC_DIR@/library \
	TK_LIBRARY=@TK40_SRC_DIR@/library \
	LD_LIBRARY_PATH=$(SITE_LDPATH)

ENV_TK41_DIST = \
	TIX_LIBRARY=$(SDIST)/library \
	TCL_LIBRARY=@TCL75_SRC_DIR@/library \
	TK_LIBRARY=@TK41_SRC_DIR@/library \
	LD_LIBRARY_PATH=$(BDIST)/unix-tk4.1:$(SITE_LDPATH)

ENV_ITCL20_DIST = \
	TIX_LIBRARY=$(SDIST)/library \
	TCL_LIBRARY=@ITCL20_SRC_DIR@/tcl7.4/library \
	TK_LIBRARY=@ITCL20_SRC_DIR@/tk4.0/library \
	ITCL_LIBRARY=@ITCL20_SRC_DIR@/itcl/library \
	ITK_LIBRARY=@ITCL20_SRC_DIR@/itk/library \
	IWIDGETS_LIBRARY=@ITCL20_SRC_DIR@/iwidgets2.0.0 \
	LD_LIBRARY_PATH=$(SITE_LDPATH)

ENV_ITCL21_DIST = \
	TIX_LIBRARY=$(SDIST)/library \
	TCL_LIBRARY=@ITCL21_SRC_DIR@/tcl7.5/library \
	TK_LIBRARY=@ITCL21_SRC_DIR@/tk4.1/library \
	ITCL_LIBRARY=@ITCL21_SRC_DIR@/itcl/library \
	ITK_LIBRARY=@ITCL21_SRC_DIR@/itk/library \
	IWIDGETS_LIBRARY=@ITCL21_SRC_DIR@/iwidgets2.1.0 \
	LD_LIBRARY_PATH=$(BDIST)/unix-itcl2.1:$(SITE_LDPATH)

dist_tk40:
	@echo
	@echo ======================== tk40_dist
	@echo
	-$(ENV_TK40_DIST) ldd $(BDIST)/unix-tk4.0/tixwish
	$(ENV_TK40_DIST) $(BDIST)/unix-tk4.0/tixwish Driver.tcl $(SUBSETS)

dist_tk41:
	@echo
	@echo ======================== tk41_dist
	@echo
	-$(ENV_TK41_DIST) ldd $(BDIST)/unix-tk4.1/tixwish
	$(ENV_TK41_DIST) $(BDIST)/unix-tk4.1/tixwish Driver.tcl $(SUBSETS)

dist_itcl20:
	@echo
	@echo ======================== itcl20_dist
	@echo
	-$(ENV_ITCL20_DIST) ldd $(BDIST)/unix-itcl2.0/itixwish
	$(ENV_ITCL20_DIST) $(BDIST)/unix-itcl2.0/itixwish Driver.tcl $(SUBSETS)

dist_itcl21:
	@echo
	@echo ======================== itcl21_dist
	@echo
	-$(ENV_ITCL21_DIST) ldd $(BDIST)/unix-itcl2.1/itixwish
	$(ENV_ITCL21_DIST) $(BDIST)/unix-itcl2.1/itixwish Driver.tcl $(SUBSETS)
