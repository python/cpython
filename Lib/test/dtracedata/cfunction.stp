global tracing

probe process.mark("function__entry")
{
    if (user_string($arg2) == "start") {
        tracing = 1;
    }
}

probe process.mark("cfunction__entry"), process.mark("cfunction__return")
{
    if (tracing) {
        modulename = $arg4 ? user_string($arg4) : "";
        printf("%d\t%s:%s:%d:%s:%s\n", gettimeofday_us(), $$name,
               user_string($arg1), $arg3, modulename, user_string($arg2));
    }
}

probe process.mark("function__return")
{
    if (user_string($arg2) == "start") {
        tracing = 0;
    }
}
