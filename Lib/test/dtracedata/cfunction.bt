@seq = 0;

usdt:@TARGET@:python:function__entry /str(args->arg1) == "start"/ { @trace[tid] = 1; }

usdt:@TARGET@:python:cfunction__entry /@trace[tid]/ {
    @seq += 1;
    const char *module = args->arg3 ? str(args->arg3) : "";
    printf("%d\tcfunction-entry:%s:%s:%d:%s\n", (int)@seq,
           str(args->arg0), str(args->arg1), args->arg2, module);
}

usdt:@TARGET@:python:cfunction__return /@trace[tid]/ {
    @seq += 1;
    const char *module = args->arg3 ? str(args->arg3) : "";
    printf("%d\tcfunction-return:%s:%s:%d:%s\n", (int)@seq,
           str(args->arg0), str(args->arg1), args->arg2, module);
}

usdt:@TARGET@:python:function__return /str(args->arg1) == "start"/ { @trace[tid] = 0; }
